<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#0B0F1A" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="SafeHer" />
  <meta name="description" content="SafeHer ‚Äî Women's Personal Safety App" />
  <meta name="mobile-web-app-capable" content="yes" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.svg" />
  <link rel="icon" type="image/svg+xml" href="assets/icons/icon-192.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="css/style.css" />
  <title>SafeHer</title>
</head>
<body>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê APP HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <header id="app-header">
    <div class="header-left">
      <svg class="header-logo" width="28" height="28" viewBox="0 0 192 192" fill="none">
        <path d="M96 28 L150 54 V98 C150 140 96 168 96 168 S42 140 42 98 V54 Z" fill="var(--accent-red)"/>
        <path d="M96 120 C82 108 66 96 66 82 C66 72 74 66 82 66 C88 66 93 70 96 75 C99 70 104 66 110 66 C118 66 126 72 126 82 C126 96 110 108 96 120Z" fill="var(--text-primary)"/>
      </svg>
      <span class="header-title">SafeHer</span>
    </div>
    <div class="header-right">
      <div id="status-indicator" class="status-badge status-safe">
        <span class="status-dot"></span>
        <span class="status-text">Safe</span>
      </div>
    </div>
  </header>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN: HOME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <main id="screen-home" class="screen active">
    <!-- Status Card -->
    <section class="status-card" id="home-status-card">
      <div class="status-card-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2">
          <path d="M12 2 L20 6 V12 C20 17 12 22 12 22 S4 17 4 12 V6 Z"/>
          <path d="M9 12 L11 14 L15 10"/>
        </svg>
      </div>
      <div class="status-card-content">
        <h2 id="status-card-title">You're Safe</h2>
        <p id="status-card-sub">All systems normal. Stay alert, stay safe.</p>
      </div>
    </section>

    <!-- SOS Button -->
    <section class="sos-section">
      <p class="sos-label">Hold for 3 seconds to trigger SOS</p>
      <div class="sos-ring">
        <div class="sos-ring-pulse"></div>
        <button id="btn-sos" class="sos-button" aria-label="Emergency SOS ‚Äî hold for 3 seconds">
          <span class="sos-text">SOS</span>
        </button>
      </div>
      <p class="sos-sublabel">Emergency alert will be sent to your contacts</p>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <h3 class="section-title">Quick Actions</h3>
      <div class="quick-actions-grid">
        <button id="btn-fake-call" class="action-card" data-action="fake-call">
          <div class="action-icon action-icon--blue">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
          </div>
          <span>Fake Call</span>
        </button>
        <button id="btn-quick-record" class="action-card" data-action="record">
          <div class="action-icon action-icon--red">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
          </div>
          <span>Record</span>
        </button>
        <button id="btn-share-location" class="action-card" data-action="share-location">
          <div class="action-icon action-icon--green">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
          </div>
          <span>Share Location</span>
        </button>
        <button id="btn-quick-siren" class="action-card" data-action="siren">
          <div class="action-icon action-icon--amber">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
              <line x1="12" y1="2" x2="12" y2="4"/>
            </svg>
          </div>
          <span>Siren</span>
        </button>
      </div>
    </section>

    <!-- Safety Features -->
    <section class="features-section">
      <h3 class="section-title">Safety Features</h3>
      <!-- Safe Mode -->
      <div class="feature-card" id="feature-safe-mode">
        <div class="feature-info">
          <div class="feature-icon feature-icon--green">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2 L20 6 V12 C20 17 12 22 12 22 S4 17 4 12 V6 Z"/>
              <path d="M9 12 L11 14 L15 10"/>
            </svg>
          </div>
          <div>
            <h4>Safe Mode</h4>
            <p id="safe-mode-status">Off ‚Äî Set a check-in timer</p>
          </div>
        </div>
        <label class="toggle" for="toggle-safe-mode">
          <input type="checkbox" id="toggle-safe-mode" />
          <span class="toggle-slider"></span>
        </label>
      </div>
      <!-- Safe Mode Timer Picker (hidden by default) -->
      <div id="safe-mode-options" class="feature-options hidden">
        <p class="feature-options-label">Check-in every:</p>
        <div class="timer-buttons">
          <button class="timer-btn" data-minutes="15">15 min</button>
          <button class="timer-btn" data-minutes="30">30 min</button>
          <button class="timer-btn active" data-minutes="60">60 min</button>
        </div>
        <div id="safe-mode-timer-display" class="timer-display hidden">
          <span id="safe-mode-countdown">60:00</span>
          <button id="btn-checkin" class="btn btn--green btn--sm">I'm Safe ‚úì</button>
        </div>
      </div>

      <!-- Motion Detection -->
      <div class="feature-card" id="feature-motion">
        <div class="feature-info">
          <div class="feature-icon feature-icon--amber">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 12 L6 8 L10 12 L14 4 L18 12 L22 8"/>
              <line x1="2" y1="20" x2="22" y2="20"/>
            </svg>
          </div>
          <div>
            <h4>Shake Detection</h4>
            <p id="motion-status">Off ‚Äî Detects violent shaking</p>
          </div>
        </div>
        <label class="toggle" for="toggle-motion">
          <input type="checkbox" id="toggle-motion" />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <!-- Voice Detection -->
      <div class="feature-card" id="feature-voice">
        <div class="feature-info">
          <div class="feature-icon feature-icon--blue">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
          </div>
          <div>
            <h4>Voice Detection</h4>
            <p id="voice-status">Off ‚Äî Listens for distress words</p>
          </div>
        </div>
        <label class="toggle" for="toggle-voice">
          <input type="checkbox" id="toggle-voice" />
          <span class="toggle-slider"></span>
        </label>
      </div>
    </section>
  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN: JOURNEY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <main id="screen-journey" class="screen">
    <!-- Header with status pill -->
    <section class="journey-header-card">
      <div class="journey-header-row">
        <h3>My Journey</h3>
        <span id="journey-phase-pill" class="journey-pill journey-pill--planning">Planning</span>
      </div>
      <p id="journey-info-text">Plan your route with waypoints, then start tracking.</p>
    </section>

    <!-- Map -->
    <div id="map-container"></div>

    <!-- Journey Controls Panel -->
    <div class="journey-controls">

      <!-- Phase 1: Planning -->
      <div id="journey-planning-panel" class="journey-panel">
        <p class="journey-instruction">üìç Tap the map to add waypoints (max 10)</p>
        <div id="waypoints-list" class="waypoints-list"></div>
        <div class="waypoints-actions">
          <button id="btn-clear-waypoints" class="journey-link-btn" type="button">Clear All</button>
        </div>
        <button id="btn-start-journey" class="btn btn--green btn--lg journey-full-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          ‚ñ∂ Start Journey
        </button>
      </div>

      <!-- Phase 2: Active -->
      <div id="journey-active-panel" class="journey-panel hidden">
        <div id="journey-live-status" class="journey-live-bar">
          <span id="journey-node-status">Tracking started‚Ä¶</span>
          <span id="journey-deviation-status" class="deviation-ok">‚úÖ On route</span>
        </div>

        <!-- Stats row -->
        <div class="journey-stats" id="journey-stats">
          <div class="stat-item">
            <span class="stat-value" id="journey-duration">00:00:00</span>
            <span class="stat-label">Duration</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="journey-distance">0 m</span>
            <span class="stat-label">Distance</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="journey-speed">0 km/h</span>
            <span class="stat-label">Speed</span>
          </div>
        </div>

        <button id="btn-home-safe" class="btn btn--green btn--lg journey-full-btn">
          ‚úÖ I'm Home Safe
        </button>
        <button id="btn-pause-journey" class="btn btn--ghost btn--sm journey-full-btn" style="margin-top:8px;">
          ‚è∏ Pause Journey
        </button>
        <button id="btn-share-journey" class="btn btn--blue btn--sm journey-full-btn" style="margin-top:8px;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
          Share Location
        </button>
      </div>

      <!-- Phase 3: Complete -->
      <div id="journey-complete-panel" class="journey-panel hidden">
        <div class="journey-complete-msg">
          <h4>üèÅ Journey Complete!</h4>
          <p id="journey-summary-text">You arrived safely.</p>
        </div>
        <div class="journey-stats" id="journey-final-stats">
          <div class="stat-item">
            <span class="stat-value" id="journey-final-duration">00:00:00</span>
            <span class="stat-label">Duration</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="journey-final-distance">0 m</span>
            <span class="stat-label">Distance</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="journey-final-nodes">0/0</span>
            <span class="stat-label">Nodes</span>
          </div>
        </div>
        <button id="btn-new-journey" class="btn btn--blue btn--lg journey-full-btn">Plan New Journey</button>
      </div>
    </div>

    <!-- Check-in Timer Card -->
    <div class="journey-checkin-card" id="journey-checkin-card">
      <h4>‚è∞ Check-in Timer</h4>
      <p class="checkin-desc">Auto-alert contacts if you don't check in.</p>
      <div class="checkin-slider-wrap">
        <label for="checkin-slider">Alert after:</label>
        <input type="range" id="checkin-slider" min="5" max="60" step="5" value="15" />
        <span id="checkin-slider-val">15 min</span>
      </div>
      <div id="checkin-countdown-wrap" class="checkin-countdown hidden">
        <span id="checkin-countdown" class="checkin-countdown-num">15:00</span>
      </div>
      <div class="checkin-actions">
        <button id="btn-start-checkin" class="btn btn--amber btn--sm">Start Check-in Timer</button>
        <button id="btn-checkin-ok" class="btn btn--green btn--sm hidden">‚úÖ I'm Okay</button>
        <button id="btn-stop-checkin" class="btn btn--ghost btn--sm hidden">Stop Timer</button>
      </div>
    </div>
  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN: CONTACTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <main id="screen-contacts" class="screen">
    <section class="contacts-header">
      <h3>Emergency Contacts</h3>
      <p>These people will be alerted during an SOS.</p>
    </section>
    <!-- Add Contact Form -->
    <section class="contact-form-card" id="contact-form-card">
      <h4 id="contact-form-title">Add Contact</h4>
      <form id="contact-form" autocomplete="off">
        <input type="hidden" id="contact-edit-id" value="" />
        <div class="form-group">
          <label for="contact-name">Name</label>
          <input type="text" id="contact-name" placeholder="e.g. Mom" required />
        </div>
        <div class="form-group">
          <label for="contact-phone">Phone Number</label>
          <input type="tel" id="contact-phone" placeholder="+91 98765 43210" required />
        </div>
        <div class="form-group">
          <label for="contact-email">Email (optional)</label>
          <input type="email" id="contact-email" placeholder="example@email.com" />
        </div>
        <div class="form-group">
          <label for="contact-relation">Relationship</label>
          <select id="contact-relation">
            <option value="Family">Family</option>
            <option value="Friend">Friend</option>
            <option value="Partner">Partner</option>
            <option value="Colleague">Colleague</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn--green btn--sm" id="btn-save-contact">Save Contact</button>
          <button type="button" class="btn btn--ghost btn--sm" id="btn-cancel-contact">Cancel</button>
        </div>
      </form>
    </section>
    <!-- Send Location Section -->
    <section class="send-location-card" id="send-location-card">
      <h4>üìç Send My Location</h4>
      <p class="send-location-desc">Send your current location with a custom message to all saved contacts via SMS or Email.</p>
      <div class="form-group">
        <label for="custom-message">Custom Message (optional)</label>
        <textarea id="custom-message" rows="3" placeholder="I'm heading home now. Here's my live location..."></textarea>
      </div>
      <div class="send-actions">
        <button id="btn-send-sms" class="btn btn--green btn--sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          Send via SMS
        </button>
        <button id="btn-send-email" class="btn btn--blue btn--sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          Send via Email
        </button>
        <button id="btn-send-share" class="btn btn--amber btn--sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
          Share
        </button>
      </div>
    </section>

    <!-- Contact List -->
    <section id="contacts-list" class="contacts-list">
      <div class="empty-state" id="contacts-empty">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="1.5"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        <p>No emergency contacts yet.</p>
        <p class="small">Add people you trust to receive your SOS alerts.</p>
      </div>
    </section>
  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN: RECORDINGS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <main id="screen-recordings" class="screen">
    <section class="recordings-header">
      <h3>Evidence Recorder</h3>
      <p>Record audio or video evidence. Stored securely on your device.</p>
    </section>
    <section class="recorder-controls">
      <button id="btn-record-audio" class="record-btn record-btn--audio">
        <div class="record-btn-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            <line x1="12" y1="19" x2="12" y2="23"/>
          </svg>
        </div>
        <span>Record Audio</span>
        <span class="record-btn-sub" id="audio-rec-status">Tap to start</span>
      </button>
      <button id="btn-record-video" class="record-btn record-btn--video">
        <div class="record-btn-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="23 7 16 12 23 17 23 7"/>
            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
          </svg>
        </div>
        <span>Record Video</span>
        <span class="record-btn-sub" id="video-rec-status">Tap to start</span>
      </button>
    </section>
    <section class="recordings-list-section">
      <h4>Saved Recordings</h4>
      <div id="recordings-list" class="recordings-list">
        <div class="empty-state" id="recordings-empty">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>
          <p>No recordings yet.</p>
          <p class="small">Recordings are stored locally on your device.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN: HISTORY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <main id="screen-history" class="screen">
    <section class="history-header">
      <h3>Activity History</h3>
      <p>All safety events logged automatically.</p>
    </section>

    <!-- Stats Cards -->
    <section id="history-stats" class="history-stats-grid"></section>

    <!-- Search & Filter Bar -->
    <section class="history-controls">
      <div class="history-search-wrap">
        <svg class="history-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" id="history-search" placeholder="Search events‚Ä¶" class="history-search-input" autocomplete="off" />
        <div id="history-autocomplete" class="history-autocomplete hidden"></div>
      </div>
      <div id="history-filter-chips" class="history-chips">
        <button class="hist-chip active" data-filter="all">All</button>
        <button class="hist-chip hist-chip--critical" data-filter="critical">üî¥ Critical</button>
        <button class="hist-chip hist-chip--warning" data-filter="warning">üü° Warning</button>
        <button class="hist-chip hist-chip--info" data-filter="info">üîµ Info</button>
        <button class="hist-chip hist-chip--safe" data-filter="safe">üü¢ Safe</button>
      </div>
      <div class="history-toolbar">
        <button id="history-sort-btn" class="hist-toolbar-btn">‚Üì Newest</button>
        <button id="history-export-btn" class="hist-toolbar-btn">üì• Export</button>
        <button id="history-clear-btn" class="hist-toolbar-btn hist-toolbar-btn--danger">üóëÔ∏è Clear All</button>
      </div>
    </section>

    <!-- Event List -->
    <section id="history-event-list" class="history-event-list"></section>

    <!-- Load More -->
    <button id="history-load-more" class="btn btn--ghost btn--sm hidden" style="margin:12px auto;display:block;">Load More</button>

    <!-- Empty State -->
    <div id="history-empty" class="empty-state hidden">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-secondary)" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
      <p>No history events yet.</p>
      <p class="small">Events will appear here as you use SafeHer.</p>
    </div>
  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê BOTTOM NAVIGATION ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <nav id="bottom-nav">
    <button class="nav-btn active" data-screen="home" aria-label="Home">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2 L20 6 V12 C20 17 12 22 12 22 S4 17 4 12 V6 Z"/>
      </svg>
      <span>Home</span>
    </button>
    <button class="nav-btn" data-screen="journey" aria-label="Journey">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
        <circle cx="12" cy="10" r="3"/>
      </svg>
      <span>Journey</span>
    </button>
    <button class="nav-btn" data-screen="contacts" aria-label="Contacts">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
      <span>Contacts</span>
    </button>
    <button class="nav-btn" data-screen="recordings" aria-label="Recordings">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
        <line x1="12" y1="19" x2="12" y2="23"/>
        <line x1="8" y1="23" x2="16" y2="23"/>
      </svg>
      <span>Record</span>
    </button>
    <button class="nav-btn" data-screen="history" aria-label="History">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <polyline points="12 6 12 12 16 14"/>
      </svg>
      <span>History</span>
    </button>
  </nav>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OVERLAYS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  <!-- SOS Active Pill (visible when overlay minimized) -->
  <div id="sos-active-pill" class="sos-active-pill hidden">üî¥ SOS ACTIVE</div>

  <!-- Emergency Alert Overlay -->
  <div id="alert-overlay" class="overlay hidden">
    <button id="btn-minimize-sos" class="sos-minimize-btn" type="button">‚úï Minimize</button>
    <div class="overlay-content alert-content">
      <div class="alert-icon-ring">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
          <line x1="12" y1="9" x2="12" y2="13"/>
          <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
      </div>
      <h2>üö® EMERGENCY ALERT</h2>
      <p id="alert-overlay-msg">Sending your location and alert to emergency contacts‚Ä¶</p>
      <div class="alert-actions">
        <button id="btn-stop-alert" class="btn btn--white btn--lg">I'm Safe ‚Äî Cancel Alert</button>
        <button id="btn-call-police" class="btn btn--ghost-white btn--sm">Call Police (100)</button>
      </div>
    </div>
  </div>

  <!-- Fake Call Overlay -->
  <div id="fake-call-overlay" class="overlay hidden">
    <div class="overlay-content fake-call-content">
      <div class="fake-call-bg"></div>
      <div class="fake-call-info">
        <div class="fake-call-avatar">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        </div>
        <p class="fake-call-label">Incoming Call</p>
        <h2 class="fake-call-name" id="fake-call-name">Mom ‚ù§Ô∏è</h2>
        <p class="fake-call-number" id="fake-call-number">Mobile</p>
      </div>
      <div class="fake-call-actions">
        <button id="btn-decline-call" class="call-action-btn call-action-btn--decline" aria-label="Decline">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        </button>
        <button id="btn-accept-call" class="call-action-btn call-action-btn--accept" aria-label="Accept">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- SOS Countdown Overlay -->
  <div id="countdown-overlay" class="overlay hidden">
    <div class="overlay-content countdown-content">
      <div class="countdown-ring">
        <svg width="160" height="160" viewBox="0 0 160 160">
          <circle cx="80" cy="80" r="70" fill="none" stroke="var(--border-color)" stroke-width="6"/>
          <circle id="countdown-circle" cx="80" cy="80" r="70" fill="none" stroke="var(--accent-red)" stroke-width="6" stroke-linecap="round"
            stroke-dasharray="439.82" stroke-dashoffset="0" transform="rotate(-90 80 80)"/>
        </svg>
        <span id="countdown-number" class="countdown-number">5</span>
      </div>
      <h2>Sending SOS Alert‚Ä¶</h2>
      <p>Tap below to cancel</p>
      <button id="btn-cancel-countdown" class="btn btn--white btn--lg">Cancel ‚Äî I'm Safe</button>
    </div>
  </div>

  <!-- Share Location Modal -->
  <div id="share-location-modal" class="overlay hidden">
    <div class="overlay-content share-modal-content">
      <div class="share-modal-header">
        <h2>üìç Share Location</h2>
        <p id="share-modal-coords">Getting your location‚Ä¶</p>
      </div>
      <div class="share-modal-grid">
        <button class="share-option" data-share="whatsapp">
          <div class="share-option-icon" style="background:#25D366;">
            <svg width="26" height="26" viewBox="0 0 24 24" fill="#fff"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
          </div>
          <span>WhatsApp</span>
        </button>
        <button class="share-option" data-share="telegram">
          <div class="share-option-icon" style="background:#0088cc;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
          </div>
          <span>Telegram</span>
        </button>
        <button class="share-option" data-share="email">
          <div class="share-option-icon" style="background:#EA4335;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          </div>
          <span>Email</span>
        </button>
        <button class="share-option" data-share="outlook">
          <div class="share-option-icon" style="background:#0078D4;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff"><path d="M24 7.387v10.478c0 .23-.08.424-.238.576-.16.154-.352.23-.578.23h-8.547V9.262l2.7 1.86 .236.164c.08.05.172.074.27.074.1 0 .19-.024.27-.074l.236-.164 5.65-3.89v.155zm-.818-1.473L17.367 10.1l-2.73-1.88V6.328h8.547c.226 0 .418.08.576.234.158.155.238.348.238.575v-.223l-.816.562-.002.002v-.001l.002-.001zM13.637 5.328V19.67H1.003c-.23 0-.425-.082-.583-.244A.787.787 0 0 1 .18 18.84V5.903c0-.234.08-.432.24-.59.16-.16.353-.24.582-.24h12.055l.58.255zm-3.61 3.787c-.56-.338-1.218-.508-1.972-.508-.758 0-1.418.17-1.982.51-.563.34-1 .82-1.312 1.44-.31.62-.466 1.34-.466 2.15 0 .79.15 1.49.452 2.1.3.61.726 1.08 1.277 1.41.55.33 1.19.5 1.917.5.78 0 1.452-.17 2.016-.508.564-.34 1-.818 1.305-1.436.306-.618.46-1.33.46-2.135 0-.81-.158-1.53-.473-2.152-.315-.623-.754-1.103-1.316-1.44l-.105.068zm-.69 5.588c-.27.408-.64.612-1.114.612-.48 0-.856-.204-1.127-.613-.27-.41-.406-.987-.406-1.734 0-.752.137-1.34.41-1.76.274-.42.648-.63 1.123-.63.47 0 .842.21 1.114.63.272.42.408 1.003.408 1.75 0 .748-.136 1.336-.408 1.745z"/></svg>
          </div>
          <span>Outlook</span>
        </button>
        <button class="share-option" data-share="copy">
          <div class="share-option-icon" style="background:#8E8E93;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          </div>
          <span>Copy Link</span>
        </button>
      </div>
      <button id="btn-close-share-modal" class="btn btn--white btn--lg" style="margin-top:16px;width:100%;max-width:320px;">Close</button>
    </div>
  </div>

  <!-- Toast Notifications Container -->
  <div id="toast-container"></div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS with your public key
    (function() { emailjs.init('mrTZ15ONC1nl0IMht'); })();
  </script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
